<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Encuesta para Diana</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: linear-gradient(#f7f7fb, #eef1ff);
    text-align: center;
    padding: 40px;
  }

  #card {
    background: white;
    max-width: 520px;
    margin: auto;
    padding: 35px;
    border-radius: 16px;
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
    animation: fade 0.6s ease;
  }

  @keyframes fade {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  h1, h2 {
    color: #333;
  }

  p {
    font-size: 18px;
    color: #555;
  }

  button {
    padding: 12px 24px;
    font-size: 16px;
    margin: 12px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .yes {
    background: #6c8cff;
    color: white;
  }

  .no {
    background: #e0e0e0;
  }

  #extra {
    margin-top: 18px;
    font-size: 16px;
    color: #777;
    min-height: 60px;
  }
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_3c7a33c6f2.mp3" type="audio/mpeg">
</audio>

<div id="card">
  <h1>Encuesta para Diana</h1>
  <p>(A√∫n no te he preguntado por tus apellidos)</p>
  <p>Prometo que no tarda mucho üòä</p>
  <button class="yes" onclick="start()">Empezar</button>
</div>

<script>
let step = 0;
let subStep = 0;

const questions = [
  { type: "diana" },
  { type: "gender" },

  {
    type: "animal",
    q: "¬øSab√≠as que hay ranas que pueden congelarse y volver a la vida?",
    fact: "A veces detenerse tambi√©n es una forma de sobrevivir üê∏"
  },
  {
    type: "animal",
    q: "¬øSab√≠as que las abejas se comunican bailando?",
    fact: "Incluso los movimientos peque√±os pueden decir mucho üêù"
  },
  {
    type: "animal",
    q: "¬øSab√≠as que los pulpos pueden regenerar sus brazos?",
    fact: "Perder algo no significa no poder volver a crecer üêô"
  },
  {
    type: "animal",
    q: "¬øSab√≠as que las mariposas monarca viajan miles de kil√≥metros?",
    fact: "A veces avanzamos sin saber exactamente c√≥mo, y aun as√≠ llegamos ü¶ã"
  },
  {
    type: "animal",
    q: "¬øSab√≠as que el ajolote puede regenerar partes de su coraz√≥n y cerebro?",
    fact: "Sanar tambi√©n puede ser un proceso natural üê∏"
  },

  {
    type: "normal",
    q: "Pregunta importante: ¬øeres consciente de que vales much√≠simo?",
    fact: "A veces solo hace falta que alguien lo recuerde ‚ú®"
  },
  {
    type: "normal",
    q: "¬øSab√≠as que la oxitocina ayuda a sentir calma y conexi√≥n?",
    fact: "Leer algo bonito, sonre√≠r o sentirse acompa√±ado tambi√©n la activa üíô"
  },
  {
    type: "normal",
    q: "√öltima y muy importante: ¬øte das permiso de seguir adelante a tu ritmo?",
    fact: "Sin prisa, sin presi√≥n"
  }
];

function start() {
  const music = document.getElementById("bgMusic");
  music.volume = 0.25;
  music.play().catch(()=>{});
  step = 0;
  subStep = 0;
  show();
}

function show() {
  const card = document.getElementById("card");
  const q = questions[step];

  // Pausa visual
  card.innerHTML = `<p>...</p>`;

  setTimeout(() => {
    if (q.type === "diana") showDiana();
    else if (q.type === "gender") showGender();
    else if (q.type === "animal") showAnimal(q);
    else showNormal(q);
  }, 600);
}

/* ---------- DIANA ---------- */
function showDiana() {
  if (subStep === 0) {
    render(
      "Pregunta r√°pida üòä ¬øTu nombre es Diana?",
      "S√≠",
      "No",
      () => next(),
      () => { subStep = 1; show(); }
    );
  } else if (subStep === 1) {
    render(
      "¬øEst√°s segura?",
      "Me equivoqu√©, s√≠ soy Diana",
      "S√≠, no soy Diana",
      () => next(),
      () => {
        render(
          "Es imposible que no seas Diana porque no conozco a nadie m√°s con ese nombre",
          "Bueno‚Ä¶ s√≠ soy Diana",
          null,
          () => next()
        );
      }
    );
  }
}

/* ---------- G√âNERO ---------- */
function showGender() {
  if (subStep === 0) {
    render(
      "¬øEres chica?",
      "No, s√≠ soy una chica en realidad",
      "S√≠, soy un chico",
      () => next(),
      () => { subStep = 1; show(); }
    );
  } else if (subStep === 1) {
    render(
      "¬øSegura?",
      "Est√° bien, s√≠ soy una chica",
      "Te digo que soy chico, me dar√≠a cuenta",
      () => next(),
      () => {
        render(
          "Est√° bien‚Ä¶",
          "Me atrapaste, soy una chica",
          null,
          () => next()
        );
      }
    );
  }
}

/* ---------- ANIMALES ---------- */
function showAnimal(q) {
  if (subStep === 0) {
    render(
      q.q,
      "S√≠",
      "No",
      () => showFact(q),
      () => { subStep = 1; show(); }
    );
  } else {
    render(
      "¬øQuieres aprender un poco?",
      "S√≠",
      "No",
      () => showFact(q),
      () => {
        render(
          "Creo que s√≠ quieres aprender üôÇ",
          "S√≠",
          null,
          () => showFact(q)
        );
      }
    );
  }
}

/* ---------- NORMALES ---------- */
function showNormal(q) {
  render(
    q.q,
    "S√≠",
    "No",
    () => showFact(q),
    () => showFact(q)
  );
}

function showFact(q) {
  document.getElementById("card").innerHTML = `
    <p>${q.fact}</p>
  `;
  setTimeout(() => {
    next();
  }, 3500);
}

function render(text, yesText, noText, yesFn, noFn) {
  document.getElementById("card").innerHTML = `
    <h2>${text}</h2>
    <div>
      <button class="yes" onclick="(${yesFn.toString()})()">${yesText}</button>
      ${noText ? `<button class="no" onclick="(${noFn.toString()})()">${noText}</button>` : ""}
    </div>
  `;
}

function next() {
  step++;
  subStep = 0;
  if (step < questions.length) show();
  else end();
}

function end() {
  document.getElementById("card").innerHTML = `
    <h2>Gracias por responder üê∏üíô</h2>
    <p>
      Esta encuesta fue realizada por el<br>
      <strong>Equipo Internacional de Investigaci√≥n de Ranas</strong>.
    </p>
    <p>
      (Esto es porque las ranas son mi animal favorito üê∏)
    </p>
    <p>
      Concluimos que eres alguien fuerte, valiosa<br>
      y que merece cosas bonitas, incluso en momentos dif√≠ciles.
    </p>
    <p>Gracias por llegar hasta aqu√≠ ‚ú®</p>
  `;
}
</script>

</body>
</html>
