<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Encuesta para Diana</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(#f7f7fb, #eef1ff);
  text-align: center;
  padding: 40px;
}

#card {
  background: white;
  max-width: 520px;
  margin: auto;
  padding: 35px;
  border-radius: 16px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.12);
  animation: fade .5s ease;
}

@keyframes fade {
  from { opacity:0; transform:translateY(10px); }
  to { opacity:1; transform:translateY(0); }
}

button {
  padding: 12px 22px;
  font-size: 16px;
  margin: 10px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  transition: all .3s ease;
}

.yes { background:#6c8cff; color:white; }
.no  { background:#e0e0e0; position:relative; }

p { color:#555; font-size:18px; }
</style>
</head>

<body>

<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/10/30/audio_3c7a33c6f2.mp3">
</audio>

<div id="card">
  <h1>Encuesta para Diana</h1>
  <p>(AÃºn no te he preguntado por tus apellidos)</p>
  <button class="yes" onclick="start()">Empezar</button>
</div>

<script>
let step = 0;
let phase = 0;
let noCount = 0;

const flow = [
  "diana",
  "gender",
  "animal1",
  "animal2",
  "animal3",
  "animal4",
  "worth",
  "end"
];

function start(){
  const m=document.getElementById("bgMusic");
  m.volume=0.25;
  m.play().catch(()=>{});
  step=0; phase=0; noCount=0;
  render();
}

function render(){
  const card=document.getElementById("card");
  card.innerHTML="";
  switch(flow[step]){
    case "diana": diana(card); break;
    case "gender": gender(card); break;
    case "animal1": animal(card,
      "Â¿SabÃ­as que hay ranas que pueden congelarse y volver a la vida?",
      "A veces detenerse tambiÃ©n es una forma de sobrevivir ğŸ¸"); break;
    case "animal2": animal(card,
      "Â¿SabÃ­as que las abejas se comunican bailando?",
      "Incluso los movimientos pequeÃ±os pueden decir mucho ğŸ"); break;
    case "animal3": animal(card,
      "Â¿SabÃ­as que los pulpos regeneran sus brazos?",
      "Perder algo no significa no poder volver a crecer ğŸ™"); break;
    case "animal4": animal(card,
      "Â¿SabÃ­as que el ajolote puede regenerar corazÃ³n y cerebro?",
      "Sanar tambiÃ©n puede ser un proceso natural ğŸ¸"); break;
    case "worth": worth(card); break;
    case "end": end(); break;
  }
}

/* ---------- DIANA ---------- */
function diana(card){
  if(phase===0){
    card.innerHTML=`
      <h2>Â¿Tu nombre es Diana?</h2>
      <button class="yes" onclick="next()">SÃ­</button>
      <button class="no" onclick="phase=1;render()">No</button>`;
  } else {
    card.innerHTML=`
      <h2>Â¿EstÃ¡s segura?</h2>
      <button class="yes" onclick="next()">Me equivoquÃ©, sÃ­ soy Diana</button>
      <button class="no" onclick="onlyYes('Es imposible que no seas Diana ğŸ˜Œ')">SÃ­, no soy Diana</button>`;
  }
}

/* ---------- GÃ‰NERO ---------- */
function gender(card){
  if(phase===0){
    card.innerHTML=`
      <h2>Â¿Eres chica?</h2>
      <button class="yes" onclick="next()">SÃ­</button>
      <button class="no" onclick="phase=1;render()">No</button>`;
  } else if(phase===1){
    card.innerHTML=`
      <h2>Mmmâ€¦ lo dudo ğŸ¤¨</h2>
      <button class="yes" onclick="next()">EstÃ¡ bien, sÃ­ soy una chica</button>
      <button class="no" onclick="phase=2;render()">Te digo que soy chico</button>`;
  } else {
    card.innerHTML=`
      <h2>AjÃ¡â€¦ ğŸ˜</h2>
      <button class="yes" onclick="next()">Me atrapaste, sÃ­ soy una chica</button>`;
  }
}

/* ---------- ANIMALES ---------- */
function animal(card,question,fact){
  if(phase===0){
    card.innerHTML=`
      <h2>${question}</h2>
      <button class="yes" onclick="animalYes('${fact}')">SÃ­</button>
      <button class="no" onclick="phase=1;render()">No</button>`;
  } else {
    card.innerHTML=`
      <h2>Â¿Quieres aprender un poco?</h2>
      <button class="yes" onclick="animalYes('${fact}')">SÃ­</button>
      <button class="no" onclick="animalForce('${fact}')">No</button>`;
  }
}

function animalYes(fact){
  showFact(fact);
}

function animalForce(fact){
  showFact(fact);
}

function showFact(text){
  const card=document.getElementById("card");
  card.innerHTML=`<p>${text}</p>`;
  setTimeout(next,3500);
}

/* ---------- VALOR ---------- */
function worth(card){
  if(noCount===0){
    card.innerHTML=`
      <h2>Â¿Eres consciente de que vales muchÃ­simo?</h2>
      <button class="yes" onclick="showFact('A veces solo hace falta que alguien lo recuerde âœ¨')">SÃ­</button>
      <button class="no" onclick="moveNo()">No</button>`;
  }
}

function moveNo(){
  noCount++;
  const noBtn=document.querySelector(".no");
  if(noCount>=4){
    noBtn.remove();
    document.querySelector(".yes").style.transform="scale(1.2)";
  } else {
    noBtn.style.left=(Math.random()*80-40)+"px";
    noBtn.style.top=(Math.random()*40-20)+"px";
  }
}

/* ---------- COMÃšN ---------- */
function onlyYes(text){
  const card=document.getElementById("card");
  card.innerHTML=`
    <p>${text}</p>
    <button class="yes" onclick="next()">Continuar</button>`;
}

function next(){
  step++; phase=0; noCount=0;
  render();
}

function end(){
  document.getElementById("card").innerHTML=`
    <h2>Gracias por responder ğŸ¸</h2>
    <p>Encuesta realizada por el <strong>Equipo de InvestigaciÃ³n de Ranas</strong></p>
    <p>(porque son mi animal favorito)</p>
    <p>Eres valiosa y mereces cosas bonitas ğŸ’™</p>`;
}
</script>

</body>
</html>
